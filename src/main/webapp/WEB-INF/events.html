<!DOCTYPE HTML>
<!--
  Copyright 2015 Benedikt Ritter

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <title th:text="${#messages.msg('titles.events')}"></title>
    <!-- Latest compiled and minified CSS -->
    <meta name="description" content=""/>
    <meta name="title" content=""/>
    <meta name="author" content=""/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
    <meta name="keywords" content="excursium"/>

    <link rel="stylesheet" type="text/css" href="../resources/css/styles.css"/>
    <link rel="stylesheet" href="../resources/css/media.css"/>
    <link rel="stylesheet" type="text/css" href="../resources/css/footer.css"/>
    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css"/>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <!-- Icon -->
    <link rel="icon" href="../resources/img/icon.ico" type="image/x-icon"/>
    <link rel="shortcut icon" href="../resources/img/icon.ico" type="image/x-icon"/>

    <link rel="stylesheet" href="../resources/libs/bootstrap-select/css/bootstrap-select.css"/>
    <script type="text/javascript" src="../resources/libs/bootstrap-select/js/bootstrap-select.js"></script>

    <link rel="stylesheet" href="../resources/css/segoe_ui.css"/>

    <link rel="stylesheet" href="../resources/libs/bootstrapformhelpers/css/bootstrap-formhelpers.min.css"/>
    <script type="text/javascript"
            src="../resources/libs/bootstrapformhelpers/js/bootstrap-formhelpers.min.js"></script>
</head>
<body style="background-color: #f9f9f9;" th:with="price_up=${#httpServletRequest.getParameter('price_up')},price_down=${#httpServletRequest.getParameter('price_down')},
                                                  id=${#httpServletRequest.getParameter('id')},category=${#httpServletRequest.getParameter('category')},
                                                  words=${#httpServletRequest.getParameter('words')},sort_by=${#httpServletRequest.getParameter('sort_by')}">
<style type="text/css">

    .navbar-fixed-top {
        min-height: 95px;
    }

    .navbar-nav > li > a {
        font-family: SegoeUIRegular, serif;
        padding-top: 0;
        padding-bottom: 0;
        line-height: 95px;
    }

    .navbar-custom {
        background: linear-gradient(to left, #68b3bd, #00ae6f);
        color: #000000;
        border-radius: 0;
    }

    .navbar-custom .navbar-nav > li > a {
        color: #000000;
    }

    .navbar-custom .navbar-nav > .active > a {
        color: #000000;
        background-color: transparent;
    }

    .navbar-custom .navbar-nav > li > a:hover,
    .navbar-custom .navbar-nav > li > a:focus,
    .navbar-custom .navbar-nav > .active > a:hover,
    .navbar-custom .navbar-nav > .active > a:focus,
    .navbar-custom .navbar-nav > .open > a {
        text-decoration: none;
        background-color: #B2EBF2;
    }

    .navbar-custom .navbar-brand {
        color: #eeeeee;
    }

    .navbar-custom .navbar-toggle {
        background-color: #eeeeee;
    }

    .navbar-custom .icon-bar {
        background-color: #33aa33;
    }
</style>
<div class="content">
    <nav class="navbar navbar-default navbar-custom" role="navigation">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                        data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle Navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>

                <a class="navbar-brand" href="/">
                    <img id="brand-image" alt="Website Logo" src="../resources/img/logo.png"/>
                </a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">

                <!-- Содержимое основной части -->
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="/events/moderation" th:text="${#messages.msg('titles.events')}">Модерация экскурсий</a></li>
                    <li><a href="/users/moderation" th:text="${#messages.msg('titles.persons')}">Модерация пользователей</a></li>
                </ul>

            </div><!-- navbar collapse end -->
        </div><!-- container-fluid end -->
    </nav>
    <div class="page-header">
        <h1 th:text="${#messages.msg('titles.events')}">Модерация экскурсий</h1>
    </div>

    <hr/>
    <div class="row">
        <div class="col-md-12 col-lg-6">

            <form th:object="${insertEvent}" action="/events/add" method="POST" enctype="multipart/form-data">

                <div class="panel panel-default">
                    <div class="panel-heading" th:text="${#messages.msg('words.type')}">
                        Тип экскурсии
                    </div>
                    <div class="panel-body">
                        <div class="input-group">
                            <select name="type" class="form-control selectpicker" th:selected="${insertEvent.getType()}?${insertEvent.getType()}:0">
                                <option value="-3">Не прошла модерацию</option>
                                <option value="-2">На перемодерации</option>
                                <option value="-1">Не активна</option>
                                <option value="1">Активна</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="input-group">
                    <span class="input-group-addon" th:text="${#messages.msg('words.guide_id')}"></span>
                    <input class="form-control" name="guideId" id="guide_id" type="number" required=""
                           th:value="${insertEvent.getGuideId()}"/>
                </div>
                <br/>
                <div class="input-group">
                    <span class="input-group-addon">ID</span>
                    <input class="form-control" type="number" name="id" id="id" th:value="${insertEvent.id}" required=""/>
                </div>
                <br/>
                <div class="input-group">
                    <span class="input-group-addon" th:text="${#messages.msg('words.name')}">Название</span>
                    <input name="name" type="text" class="form-control" id = "name" placeholder="Название" aria-label="Название"
                           th:value="${insertEvent.getName()}" required="" />
                    <label for="name" th:if="${#fields.hasErrors('name')}" th:text="${#messages.msg('error.event.name')}" th:class="'error'">Name Error</label>
                </div>
                <br/>
                <div class="input-group">
                    <span class="input-group-addon" th:text="${#messages.msg('words.description')}">Описание</span>
                    <textarea name="description" type="text" id = "description" class="form-control" placeholder="Описание" required=""
                              aria-label="Описание" th:text="${insertEvent.getDescription()}"></textarea>
                    <label for="description" th:if="${#fields.hasErrors('description')}" th:text="${#messages.msg('error.event.description')}" th:class="'error'">Description Error</label>
                </div>
                <br/>
                <div class="panel panel-default">
                    <div class="panel-heading" th:text="${#messages.msg('words.type_of_excursion')}">
                        Тип экскурсии
                    </div>
                    <div class="panel-body">
                        <div class="input-group">
                            <select name="category" id = "category" class="form-control selectpicker" th:selected="${insertEvent.getCategory()}?${insertEvent.getCategory()}:0">
                                <option value="0" th:text="${#messages.msg('category.0')}">Развлечения</option>
                                <option value="1" th:text="${#messages.msg('category.1')}">Наука</option>
                                <option value="2" th:text="${#messages.msg('category.2')}">История</option>
                                <option value="3" th:text="${#messages.msg('category.3')}">Искусство</option>
                                <option value="4" th:text="${#messages.msg('category.4')}">Производство</option>
                                <option value="5" th:text="${#messages.msg('category.5')}">Гастрономия</option>
                                <option value="6" th:text="${#messages.msg('category.6')}">Квесты</option>
                                <option value="7" th:text="${#messages.msg('category.7')}">Экстрим</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="input-group">
                    <span class="input-group-addon" th:text="${#messages.msg('words.users_count')}">Количество участников</span>
                    <input name="usersCount" id = "users_count" type="number" class="form-control" placeholder="Количество участников" required=""
                           aria-label="Количество участников" th:value="${insertEvent.getUsersCount()}?${insertEvent.getUsersCount()}"/>
                    <label for="users_count" th:if="${#fields.hasErrors('usersCount')}" th:text="${#messages.msg('error.event.users_count')}" th:class="'error'">UsersCount Error</label>
                </div>
                <br/>
                <div class="input-group">
                    <span class="input-group-addon" th:text="${#messages.msg('words.duration')}">Длительность</span>
                    <input name="duration" id = "duration" type="number" class="form-control" placeholder="Длительность:" required=""
                           aria-label="Длительность:" th:value="${insertEvent.getDuration()}?${insertEvent.getDuration()}"/>
                    <span class="input-group-addon" th:text="${#messages.msg('words.hours')}">часов</span>
                    <label for="duration" th:if="${#fields.hasErrors('duration')}" th:text="${#messages.msg('error.event.duration')}" th:class="'error'">Duration Error</label>
                </div>
                <br/>
                <div class="input-group">
                    <span class="input-group-addon" th:text="${#messages.msg('words.place')}">Место встречи</span>
                    <input name="place" id = "place" type="text" class="form-control" placeholder="Место встречи" required=""
                           aria-label="Место встречи" th:value="${insertEvent.getPlace()}?${insertEvent.getPlace()}"/>
                    <label for="place" th:if="${#fields.hasErrors('place')}" th:text="${#messages.msg('error.event.place')}" th:class="'error'">Place Error</label>
                </div>
                <br/>
                <div class="input-group">
                    <span class="input-group-addon" th:text="${#messages.msg('words.price')}">Цена</span>
                    <input name="price" id = "price" type="number" class="form-control" placeholder="Цена" aria-label="Цена" required=""
                           th:value="${insertEvent.getPrice()}?${insertEvent.getPrice()}"/>
                    <span class="input-group-addon">&#8381;</span>
                    <label for="price" th:if="${#fields.hasErrors('price')}" th:text="${#messages.msg('error.event.price')}" th:class="'error'">Price Error</label>
                </div>
                <br/>
                <div class="input-group">
                    <span class="input-group-addon" th:text="${#messages.msg('words.photos')}">Фотографии</span>
                    <input name="file" type="file" id = "file" class="form-control" placeholder="Фотографии" required=""
                           accept="image/jpeg,image/png" aria-label="Фотографии"/>
                    <!--<label for="file" th:if="${error_data}" th:text="${#messages.msg('error.event.file')}" th:class="'error'">File Error</label>-->
                </div>
                <br/>

                <div class="panel panel-default">
                    <div class="panel-heading" th:text="${#messages.msg('words.language')}">
                        Язык экскурсии
                    </div>
                    <div class="panel-body">
                        <div class="input-group">
                            <select name="language" class="form-control selectpicker" th:selected="${insertEvent.getLanguage()}?${insertEvent.getLanguage()}">
                                <option value="0" th:text="${#messages.msg('language.0')}">Русский</option>
                                <option value="1" th:text="${#messages.msg('language.1')}">Английский</option>
                            </select>
                        </div>
                    </div>
                </div>
                <br/>
                <button type="reset" class="btn btn-default" th:text="${#messages.msg('words.reset')}">Сброс</button>
                <button type="submit" class="btn btn-default" th:text="${#messages.msg('words.submit')}">Сохранить</button>

            </form>
        </div>
    </div>
    <hr/>

    <div class="row">
        <div class="col-sm-12">
            <table class="table table-striped">
                <thead>
                <tr>
                    <th th:text="${#messages.msg('words.events')}">Events</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td><a th:href="@{/events/moderation(sort_by=${inc},id=${id},price_up=${price_up},price_down=${price_down},category=${category}, words=${words})}">ID</a></td>
                    <td th:text="${#messages.msg('words.name')}">Название</td>
                    <td th:text="${#messages.msg('words.category')}">Категория</td>
                    <td th:text="${#messages.msg('words.guide_id')}">ID гида</td>
                    <td><a th:text="${#messages.msg('words.price')}" th:href="@{/events/moderation(sort_by=${inc}+2,id=${id},price_up=${price_up},price_down=${price_down},category=${category}, words=${words})}">Стоимость</a>
                    </td>
                    <td th:text="${#messages.msg('words.place')}">Место</td>
                    <td th:text="${#messages.msg('words.language')}">Язык</td>
                    <td><a th:text="${#messages.msg('words.users_count')}"
                           th:href="@{/events/moderation(sort_by=${inc}+10,id=${id},price_up=${price_up},price_down=${price_down},category=${category}, words=${words})}">Кол-во человек</a></td>
                    <td><a th:text="${#messages.msg('words.duration')}"
                           th:href="@{/events/moderation(sort_by=${inc}+8,id=${id},price_up=${price_up},price_down=${price_down},category=${category}, words=${words})}">Продолжительность</a></td>
                    <td th:text="${#messages.msg('words.description')}">Описание</td>
                    <td><a th:text="${#messages.msg('words.type')}" th:href="@{/events/moderation(sort_by=${inc}+6,id=${id},price_up=${price_up},price_down=${price_down},category=${category}, words=${words})}">Тип</a>
                    </td>
                    <td><a th:text="${#messages.msg('words.rate')}" th:href="@{/events/moderation(sort_by=${inc}+4,id=${id},price_up=${price_up},price_down=${price_down},category=${category}, words=${words})}">Рейтинг</a>
                    </td>
                    <td th:text="${#messages.msg('words.change')}">Изменить</td>
                    <td th:text="${#messages.msg('words.delete')}">Удалить</td>
                </tr>
                <tr th:each="event : ${events}">
                    <td th:text="${event.id}">Some text</td>
                    <td th:text="${event.name}">Some text</td>
                    <td th:text="${event.getCategoryString()}">Some text</td>
                    <td th:text="${event.guideId}">Some text</td>
                    <td th:text="${event.price}">Some text</td>
                    <td th:text="${event.place}">Some text</td>
                    <td th:text="${event.getLanguageString()}">Some text</td>
                    <td th:text="${event.usersCount}">Some text</td>
                    <td th:text="${event.duration}">Some text</td>
                    <td th:text="${event.description}">Some text</td>
                    <td th:text="${event.type}">Some text</td>
                    <td th:text="${event.rate}">Some text</td>
                    <td><a th:href="@{/events/moderation(id=${event.id},price_up=${price_up},price_down=${price_down},category=${category}, words=${words}, sort_by=${sort_by})}"><img
                            src="../resources/img/icons/edit.png"/></a></td>
                    <td><a th:href="@{/events/delete(id=${event.id},price_up=${price_up},price_down=${price_down},category=${category}, words=${words}, sort_by=${sort_by})}"><img src="../resources/img/icons/del.png"/></a>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
<footer id="myFooter">
    <div class="container">
        <h7 class="logo"><a href="#">&copy; 2017 Excursium</a></h7>
        <div class="social-icons">
            <a href="https://vk.com/excursium" class="twitter"><i class="fa fa-vk"></i></a>
        </div>
    </div>
</footer>
</body>
</html>