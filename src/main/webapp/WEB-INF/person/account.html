<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="description" content=""/>
    <meta name="title" content=""/>
    <meta name="author" content=""/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
    <meta name="keywords" content="excursium"/>
    <title th:text="${#messages.msg('titles.account')}">Профиль</title>

    <link rel="stylesheet" type="text/css" href="../../resources/css/footer.css"/>
    <link rel="stylesheet" href="../../resources/libs/bootstrapformhelpers/css/bootstrap-formhelpers.min.css"/>
    <link rel="stylesheet" href="../../resources/libs/bootstrap-select/css/bootstrap-select.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>

    <link rel="icon" href="../../resources/img/icon.ico" type="image/x-icon"/>
    <link rel="shortcut icon" href="../../resources/img/icon.ico" type="image/x-icon"/>

    <link rel="stylesheet" href="../../resources/css/rating.css"/>
    <link rel="stylesheet" type="text/css" href="../../resources/css/styles.css"/>
    <link rel="stylesheet" href="../../resources/css/mycards.css"/>
    <link rel="stylesheet" href="../../resources/css/media.css"/>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../resources/libs/bootstrap-select/js/bootstrap-select.js"></script>
    <script type="text/javascript"
            src="../../resources/libs/bootstrap-confirmation/js/bootstrap-confirmation.min.js"></script>

    <script th:inline="javascript">
        /*<![CDATA[*/

        function modalReview(id) {
            document.getElementById('order_id').value = id;
        }

        function modalDispute(id) {
            document.getElementById('order_id1').value = id;
        }

        $('#modalDispute').on('show.bs.modal', function (e) {
            $(this).find('.btn-ok').attr('href', $(e.relatedTarget).data('href'));

            $('.debug-url').html('Delete URL: <strong>' + $(this).find('.btn-ok').attr('href') + '</strong>');
        });

        /*]]>*/
    </script>

</head>

<body style="background-color: #f9f9f9;">
<!--/*@thymesVar id="person" type="com.heroku.demo.person.Person"*/-->
<!--/*@thymesVar id="consts" type="com.heroku.demo.utils.Consts"*/-->
<!--/*@thymesVar id="orders" type="java.util.List<com.heroku.demo.order.Buy>"*/-->
<!--/*@thymesVar id="events" type="java.util.List"*/-->
<div class="content mb-0"
     th:with="isUser = ${#httpServletRequest.isUserInRole('USER')}, isAdmin = ${#httpServletRequest.isUserInRole('ADMIN')}, isThisUserAccount = ${true},
excursovod = ${person.getType()==consts.PERSON_GUIDE or person.getType()==consts.PERSON_MODER_GUIDE or person.getType()==consts.PERSON_ADMIN},
tourist = ${person.getType()==consts.PERSON_TOURIST or person.getType()==consts.PERSON_MODER_TOURIST or person.getType()==consts.PERSON_ADMIN},
notConfirmed = ${person.getType()==consts.PERSON_DISABLED or person.getType()==consts.PERSON_ADMIN},
lang=${#locale.getLanguage().toString()=='en'?1:0}">
    <!--/*TODO isThisUserAccount*/-->
    <div th:replace="fragments/header :: header"></div>
    <style>.pe:before {
        width: 300px !important;
        margin-left: -150px !important;
    }

    .nepe:before {
        width: 620px !important;
        margin-left: -310px !important;
    }

    .notify {
        margin-top: 4px;
        margin-bottom: 8px;
    }

    .pull-right {
        margin-top: 3px;
    }</style>

    <div class="container">

        <!--/*Main layout*/-->
        <main>
            <div class="container-fluid">
                <!--/*Section: Profile*/-->
                <section style="padding: 0;">
                    <!--/*Grid row*/-->
                    <div class="row">

                        <!--/*@thymesVar id="message" type="com.heroku.demo.utils.MessageUtil"*/-->
                        <th:block th:if="${message != null}">
                            <div th:replace="fragments/alert :: alert (type=${#strings.toLowerCase(message.type)}, message=${message.message})">
                                &nbsp;
                            </div>
                        </th:block>

                        <!--/*Grid column*/-->
                        <div class="col-lg-4 col-md-12">
                            <!--/*Section: Basic Info*/-->
                            <section class="card card-cascade card-avatar mb-2" id="card-person">

                                <img th:src="${person.getImageUrl()}" src="../../resources/img/user.png" alt=""
                                     id="img-person"
                                     onerror="onImgError();"
                                     onload="if (this.width + this.height === 0) {onImgError();return;}"/>
                                <!--/*Card content*/-->
                                <div class="card-body text-center">
                                    <!--/*Title*/-->
                                    <h4 class="card-title"><strong th:text="${person.getFullName()}">Имя</strong></h4>
                                    <h5 th:text="${person.getStringType(0)}">Турист/Экскурсовод</h5>
                                    <p th:text="${person.getCity()}">Москва, Россия</p>
                                    <!--/* Social */-->
                                    <a type="button" th:if="${person.getVk()!=null and person.getVk()!=''}"
                                       th:href="${person.getVk()}"
                                       class="btn-floating badge-blue lighten-2 waves-effect waves-light"><i
                                            class="fa fa-vk"></i></a>

                                    <a type="button" th:if="${person.getTelegram()!=null and person.getTelegram()!=''}"
                                       th:href="'https://t.me/'+${person.getTelegram()}"
                                       class="btn-floating badge-blue lighten-2 waves-effect waves-light"><i
                                            class="fa fa-telegram"></i></a>
                                    <!--/*Text*/-->
                                    <p th:if="${person.getPhoneNumber()!=''}" class="card-text">тел.
                                        <th:block th:text="${person.getPhoneNumber()}"/>
                                    </p>
                                    <button th:unless="${isThisUserAccount}" type="button"
                                            class="btn btn-info waves-effect waves-light"
                                            data-toggle="modal" data-target="#modalContactUser">Связаться<i
                                            class="fa fa-paper-plane ml-2"></i></button>
                                    <a th:if="${notConfirmed}" type="button" th:href="'/users/resend_email'"
                                       class="btn btn-primary mt-1 waves-effect waves-light">
                                        <!--/*TODO translate*/-->
                                        <th:block>Подтвердить E-mail</th:block><!--/*TODO translate*/-->
                                    </a>
                                    <a th:if="${tourist}"
                                       class="btn btn-primary waves-effect waves-light mt-1"
                                       data-toggle="modal" data-target="#modalUpToGuide">Стать экскурсоводом
                                    </a>
                                    <!--/*TODO translate*/-->
                                    <a th:if="${isThisUserAccount}" class="btn btn-primary waves-effect waves-light mt-1"
                                       href="#" role="button"
                                       data-toggle="modal" data-target="#modalEditProfile">Редактировать профиль <i
                                            class="fa fa-pencil ml-2"></i></a>
                                    <a class="btn btn-outline-primary waves-effect waves-light mt-1" href="#" role="button"
                                       data-toggle="modal" data-target="#modalFeedback">Сообщить об ошибке <i
                                            class="fa fa-paper-plane ml-2"></i></a>
                                </div>
                            </section>
                            <!--/*End-of-Section: Basic Info*/-->
                            <!--/*Section: Experience*/-->
                            <section class="card mb-2">
                                <div class="card-body">

                                    <h5 class=" text-center"><strong>Статистика (демо)</strong></h5>

                                    <hr class="my-3"/>

                                    <ul class="list-unstyled pt-4">
                                        <!--/*@thymesVar id="answersCount" type="java.lang.Integer"*/--><!--TODO: yyy-->

                                        <li>
                                            <p>Новые сообщения: <span class="badge badge-primary pull-right"
                                                                      th:text="${answersCount}">14</span></p>
                                        </li>
                                        <hr class="notify"/>
                                        <!--/*@thymesVar id="ordersWaitCount" type="java.lang.Integer"*/-->
                                        <!--TODO: yyy-->
                                        <th:block th:if="${excursovod}">
                                            <li>
                                                <p>Новые заказы: <span class="badge badge-primary pull-right"
                                                                       th:text="${ordersWaitCount}">14</span></p>
                                            </li>
                                        </th:block>
                                        <!--/*@thymesVar id="ordersCompliteCount" type="java.lang.Integer"*/-->
                                        <!--TODO: yyy-->
                                        <th:block th:if="${excursovod}">
                                            <li>
                                                <p>Все заказы: <span class="badge badge-primary pull-right"
                                                                     th:text="${ordersCompliteCount}">14</span></p>
                                            </li>
                                            <hr class="notify"/>
                                        </th:block>
                                        <li>
                                            <p>Посещенные экскурсии: <span
                                                    class="badge badge-primary pull-right"
                                                    th:text="${orders.size()}">14</span></p>
                                        </li>
                                        <!--/*@thymesVar id="ordersWaitReviewsCount" type="java.lang.Integer"*/-->
                                        <!--TODO: yyy-->
                                        <th:block th:if="${ordersWaitReviewsCount!=0}">
                                            <li>
                                                <p>Ожидают отзывов: <span class="badge badge-primary pull-right"
                                                                          th:text="${ordersWaitReviewsCount}">14</span>
                                                </p>
                                            </li>
                                            <hr class="notify"/>
                                        </th:block>
                                    </ul>

                                </div>
                            </section>
                            <!--/*End-of-Section: Experience*/-->
                        </div>
                        <!--/*End-of-Grid column*/-->
                        <!--/*Grid column*/-->
                        <div class="col-lg-8 col-md-12 text-center">
                            <!--/* Heading */-->
                            <div class="text-center mt-3">
                                <h2 class="title text-center pe mt-1"
                                    th:if="${orders.size()>0}">Посещенные экскурсии</h2>
                                <h2 class="title text-center nepe mt-1"
                                    th:if="${orders.size()==0}">Здесь будут отображаться
                                    посещенные экскурсии</h2> <!--/*-310,615 TODO: translate*/-->
                                <a href="/events/list" th:if="${orders.size()==0}">
                                    <button th:if="${isThisUserAccount}" type="button"
                                            class="btn btn-primary mb-3 waves-effect waves-light">
                                        <th:block th:text="${#messages.msg('account.select_event')+' '}">Выбрать
                                            экскурсию
                                        </th:block>
                                        <i class="fa fa-photo ml-1"></i>
                                    </button>
                                </a>
                            </div>
                            <!--/*Heading*/-->
                            <!--/*Card row*/-->
                            <th:block th:if="${orders.size()!=0}">
                                <div class="card-deck" th:each="i : ${#numbers.sequence( 0, orders.size()-1)}">
                                    <th:block th:if="${i%2==0}" th:with="inc = ${i!=orders.size()-1?1:0}">
                                        <!--/*Card*/-->
                                        <div th:each="j : ${#numbers.sequence(i,i+inc)}"
                                             th:class="'card card-cascade narrower ' + ${j%2==0?'card-left':'card-right'}"
                                             th:id="'id-0'+${j}"
                                             th:style="${j != 0 and j != 1}?'display: none;'"
                                             th:with="order=${orders.get(j)}">
                                            <!--/*@thymesVar id="order" type="com.heroku.demo.order.Buy"*/-->
                                            <!--/*Card image*/-->
                                            <div class="view overlay hm-white-slight" style="margin-top: 20px">
                                                <div class="img_crop">
                                                    <img th:src="${order.getImageUrl()}" src="#" class="img-fluid"
                                                         alt=""
                                                         style="height: 240px; min-width: -webkit-fill-available;"/>
                                                </div>
                                                <a href="#">
                                                    <div class="mask waves-effect waves-light"></div>
                                                </a>
                                            </div>
                                            <!--/*Card content*/-->
                                            <div class="card-body pb-0">
                                                <!--/*Title*/-->
                                                <h4 class="card-title" th:text="${order.getName()}">Название
                                                    экскурсии</h4>
                                                <!--/*Text*/-->
                                                <span class="card-text" style="font-size: small;" align="left"
                                                      th:text="'Time of order: '+${order.getTime()}">Время заказа</span>
                                                <br/>
                                                <span class="card-text" style="font-size: small;" align="right"
                                                      th:text="'Time of book: '+${order.getTimeComplete()}">Время экскурсии</span>
                                            </div>
                                            <!--/*Card footer*/-->
                                            <div class="card-footer links-light">
                                                <div class="left price-text">
                                                    <strong th:text="${order.getPrice()}+'&#8381;  '">%Цена% </strong>
                                                </div>
                                                <div class="right">
                                                    <a th:href="@{/orders/order(id=${order.getId()})}"
                                                       class="waves-effect p-2">Открыть<i
                                                            class="fa fa-photo ml-1"></i></a>
                                                </div>
                                                <th:block th:if="${order.getType()==consts.ORDER_OPEN}">
                                                    <div class="clearfix"></div>
                                                    <div class="left">
                                                        <a th:href="@{/orders/confirm(id=${order.getId()})}"
                                                           data-title="Confirm order?"
                                                           data-target="_blank" data-toggle="confirmation"
                                                           class="waves-effect" rel="tooltip" style="display: inline">Подтвердить
                                                            заказ<i
                                                                    class="fa fa-handshake-o ml-1"></i></a>
                                                    </div>
                                                    <div class="right">
                                                        <a href="#" data-toggle="modal"
                                                           th:onclick="'modalDispute('+${order.getId()}+')'"
                                                           data-target="#modalDispute"
                                                           class="waves-effect p-2">Открыть спор<i
                                                                class="fa fa-gavel ml-1"></i></a>
                                                    </div>
                                                </th:block>
                                                <th:block
                                                        th:if="${order.getReviewId()==-1 and order.getType()==consts.ORDER_CONFIRM}">
                                                    <div class="clearfix"></div>
                                                    <div class="pt-05">
                                                        <a href="#" data-toggle="modal" data-target="#modalAddReview"
                                                           th:onclick="'modalReview('+${order.getId()}+')'">Оставить
                                                            отзыв<i
                                                                    class="fa fa-comments ml-1"></i></a>
                                                        <!--role="button" -->
                                                    </div>
                                                </th:block>
                                            </div>
                                        </div>
                                        <!--/*End-of-Card*/-->
                                    </th:block>
                                </div>
                            </th:block>
                            <!--/*End-of-Card row*/-->
                            <!--/*Pagination */-->
                            <nav class="my-4 d-flex justify-content-center mb-1" th:if="${orders.size()>2}"
                                 th:with="pages = ${orders.size()%2==0}?${orders.size()/2}:${orders.size()/2+1}">

                                <ul class="pagination pagination-circle pg-blue mb-0">
                                    <!--/*First*/-->
                                    <!--/*<li class="page-item disabled clearfix d-none d-sm-block"
                                        id="to-home-exc-0">
                                        <a class="page-link waves-effect waves-effect"
                                           th:onclick="'showHide0(1);'">В начало</a>
                                    </li>*/-->
                                    <!--/*Arrow left*/-->
                                    <!--/*Numbers*/-->
                                    <li th:each="i : ${#numbers.sequence(1, pages)}"
                                        th:class="'page-item' + (${i==1}?' active':'')"
                                        th:id="'page_events-0'+${i}">
                                        <a class="page-link waves-effect waves-effect" th:text="${i}"
                                           th:onclick="'showHide0('+${i}+');'">1
                                        </a>
                                    </li>
                                    <!--/*Arrow right*/-->
                                    <!--/*End-of-First*/-->
                                    <!--/*<li class="page-item clearfix d-none d-sm-block"
                                        id="to-end-exc-0"
                                        th:onclick="'showHide0('+${pages}+');'">
                                        <a class="page-link waves-effect waves-effect">В конец</a>
                                    </li>*/-->
                                </ul>

                            </nav>
                            <!--/*End-of-Pagination */-->
                            <!--/* Heading */-->
                            <div class="text-center mt-3" th:if="${excursovod}">
                                <h2 class="title text-center pe"
                                    th:if="${events.size()>0}">Добавленные экскурсии</h2>
                                <h2 class="title text-center nepe"
                                    th:if="${events.size()==0 and excursovod}">Здесь
                                    будут
                                    отображаться добавленные экскурсии</h2> <!--/*-310,615 TODO: translate*/-->
                                <a href="/events/add">
                                <button th:if="${isThisUserAccount and excursovod}" type="button"
                                        class="btn btn-primary mb-3 waves-effect waves-light">
                                    <th:block th:text="${#messages.msg('titles.add_event')+' '}">Добавить новую экскурсию</th:block>
                                    <i class="fa fa-photo ml-1"></i>
                                </button>
                                </a>
                            </div>
                            <!--/* End-of-Heading */-->
                            <!--/* Card row */-->
                            <th:block th:if="${events.size()!=0 and excursovod}" th:each="j : ${#numbers.sequence( 0, events.size()-1)}">
                                <!--/*Card*/-->
                                <div class="card card-cascade narrower"
                                     th:with="event = ${events.get(j)}"
                                     th:id="'id'+${j}"
                                     th:style="${j != 0}?'display: none;'">
                                    <!--/*@thymesVar id="event" type="com.heroku.demo.event.Event"*/-->
                                    <!--/*Card image*/-->
                                    <div class="view overlay hm-white-slight"  style="margin-top: 20px">
                                        <div class="img_crop">
                                            <img th:src="${event.pathToPhoto}" src="#" class="img-fluid"
                                                 style="height: 240px; min-width: -webkit-fill-available;"
                                                 alt=""/>
                                        </div>
                                        <a href="#" th:href="@{/events/event(id=${event.getId()})}">
                                            <div class="mask waves-effect waves-light"></div>
                                        </a>
                                    </div>
                                    <!--/*Card content*/-->
                                    <div class="card-body pb-0">
                                        <!--/*Title*/-->
                                        <h4 class="card-title" th:text="${event.getName()}"><a
                                                th:href="@{/events/event(id=${event.getId()})}">Название
                                            экскурсии</a></h4>
                                        <!--Rating-->
                                        <ul class="rating" style="float: inherit;">
                                            <li th:if="${event.getRate()!=-1}" th:text="${event.getRate()}"></li>
                                            <th:block th:if="${(event.getIntRate()!=-1)and(event.getIntRate()!=0)}">
                                                <li th:each="i : ${#numbers.sequence(0, event.getIntRate()-1)}">
                                                    <i class="fa fa-star"></i>
                                                </li>
                                            </th:block>
                                            <th:block th:if="${(event.getIntRate()!=-1)and(event.getIntRate()!=5)}">
                                                <li th:each="i : ${#numbers.sequence(event.getIntRate(), 4)}">
                                                    <i class="fa fa-star-o"></i>
                                                </li>
                                            </th:block>
                                            <th:block th:if="${(event.getIntRate()==-1)}">
                                                <li th:each="i : ${#numbers.sequence(0, 4)}">
                                                    <i class="fa fa-star-o"></i>
                                                </li>
                                            </th:block>
                                            <li th:text="'('+${event.getReviewsCount()}+')'"></li>
                                        </ul>
                                        <strong th:style="'color:' + ${event.getType()}==1?'#337ABB;':'#f80000;' + 'font-size: x-large; padding-top: -0.2em;'"
                                                th:text="${event.getStringType(lang)}">На модерации</strong>
                                        <!--/*TODO translate*/-->
                                    </div>
                                    <!--/*Card footer*/-->
                                    <div class="card-footer links-light">
                                        <span class="left price-text">
                                            <strong th:text="${event.getPrice()}+'&#8381;  '">%Цена%  </strong>
                                        </span>
                                        <span class="right">
                                        <a th:href="@{/events/event(id=${event.getId()})}"
                                           class="waves-effect">Открыть<i
                                                class="fa fa-photo ml-1"></i></a>
                                            <a rel="tooltip" title="Edit" href="javascript:void(0)" role="button"
                                               style="margin-left: 10px; margin-right: 2px; margin-top: 8px;">
                                            <i class="fa fa-edit" style="font-size: 20px;"></i>
                                        </a>
                                        <a rel="tooltip" title="Delete" href="javascript:void(0)" role="button"
                                           style="margin-left: 10px; margin-top: 7px;">
                                            <i class="fa fa-trash" style="font-size: 20px;"></i>
                                        </a>
                                        </span>
                                    </div>
                                </div>
                                <!--/*End-of-Card*/-->
                            </th:block>
                            <!--/* End-of-Card row */-->
                            <!--/*Pagination */-->
                            <nav class="my-4 d-flex justify-content-center" th:if="${events.size()>1 and excursovod}"
                                 th:with="pagesev = ${events.size()}">

                                <ul class="pagination pagination-circle pg-blue mb-0">
                                    <!--/*First*/-->
                                    <!--/*<li class="page-item disabled clearfix d-none d-sm-block"
                                        id="to-home-exc">
                                        <a class="page-link waves-effect waves-effect"
                                           th:onclick="'showHide(1);'">В начало</a>
                                    </li>*/-->
                                    <!--/*Arrow left*/-->
                                    <!--/*Numbers*/-->
                                    <li th:each="i : ${#numbers.sequence(1, pagesev)}"
                                        th:class="'page-item' + (${i==1}?' active':'')"
                                        th:id="'page_events'+${i}">
                                        <a class="page-link waves-effect waves-effect" th:text="${i}"
                                           th:onclick="'showHide('+${i}+');'">1
                                        </a>
                                    </li>
                                    <!--/*Arrow right*/-->
                                    <!--/*&lt;!&ndash;/*End-of-First*/&ndash;&gt;
                                    <li class="page-item clearfix d-none d-sm-block"
                                        id="to-end-exc"
                                        th:onclick="'showHide('+${pagesev}+');'">
                                        <a class="page-link waves-effect waves-effect">В конец</a>
                                    </li>*/-->
                                </ul>

                            </nav>
                            <!--/*End-of-Pagination */-->
                        </div>
                        <!--/*End-of-Grid column*/-->
                    </div>
                    <!--/*End-of-Grid row*/-->
                </section>
                <!--/*End-of-Section: Profile*/-->
                <!--/*Section: Modals*/-->
                <section class="pt-0">
                    <!--/*Modal: modalEditProfile*/-->
                    <div class="modal fade" id="modalEditProfile" tabindex="-1" role="dialog"
                         aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
                        <div class="modal-dialog cascading-modal modal-lg" role="document">
                            <!--/*Content*/-->
                            <div class="modal-content">
                                <!--/*Modal cascading tabs*/-->
                                <div class="modal-c-tabs">
                                    <!--/* Nav tabs */-->
                                    <ul class="nav nav-tabs tabs-2 light-blue darken-3" role="tablist">
                                        <li class="nav-item waves-effect waves-light">
                                            <a class="nav-link active" data-toggle="tab"
                                               th:text="${#messages.msg('words.public_info')}"
                                               href="https://mdbootstrap.com/previews/templates/admin-dashboard/html/profile/extended.html#panel77"
                                               role="tab" aria-expanded="true"><i class="fa fa-user mr-1"></i> Public
                                                info</a>
                                        </li>
                                        <li class="nav-item waves-effect waves-light">
                                            <a class="nav-link" data-toggle="tab"
                                               href="https://mdbootstrap.com/previews/templates/admin-dashboard/html/profile/extended.html#panel88"
                                               th:text="${#messages.msg('words.private_info')}"
                                               role="tab" aria-expanded="false"><i class="fa fa-lock mr-1"></i> Account</a>
                                        </li>
                                    </ul>
                                    <!--/* Tab panels */-->
                                    <div class="tab-content">
                                        <!--/*Panel 7*/-->
                                        <div class="tab-pane fade in active" id="panel77" role="tabpanel"
                                             aria-expanded="true">
                                            <!--/*Body*/-->
                                            <div class="modal-body mb-1">
                                                <form th:object="${person}" action="/users/edit_public"
                                                      enctype="multipart/form-data" method="post">
                                                    <!--/*Grid row*/-->
                                                    <div class="row">
                                                        <!--/*Grid column*/-->
                                                        <div class="col-md-6">
                                                            <!--/*First Name*/-->
                                                            <div class="md-form form-sm">
                                                                <input type="text" id="editProfile1"
                                                                       class="form-control" name="first_name"
                                                                       th:value="${person.getFirstName()}"/>
                                                                <label for="editProfile1" class=""
                                                                       th:text="${#messages.msg('words.first_name')}">First
                                                                    name</label>
                                                            </div>
                                                        </div>
                                                        <!--/*End-of-Grid column*/-->
                                                        <!--/*Grid column*/-->
                                                        <div class="col-md-6">
                                                            <!--/*Last Name*/-->
                                                            <div class="md-form form-sm">
                                                                <input type="text" id="editProfile2"
                                                                       class="form-control" name="last_name"
                                                                       th:value="${person.getLastName()}"/>
                                                                <label for="editProfile2" class=""
                                                                       th:text="${#messages.msg('words.last_name')}">Last
                                                                    name</label>
                                                            </div>
                                                        </div>
                                                        <!--/*End-of-Grid column*/-->
                                                        <!--/*Grid column*/-->
                                                        <div class="col-md-12">
                                                            <!--/*Company website*/-->
                                                            <div class="md-form form-sm">
<textarea type="text" id="editProfile5" name="about_me"
          class="md-textarea"
          th:text="${person.getAbout()}"></textarea>
                                                                <label for="editProfile5" class=""
                                                                       th:text="${#messages.msg('words.about_me')}">About
                                                                    me</label>
                                                            </div>
                                                        </div>
                                                        <!--/*End-of-Grid column*/-->
                                                        <!--/*Grid column*/-->
                                                        <div class="col-md-12">
                                                            <div class="md-form form-sm">
                                                                <input name="file" type="file" id="filePerson"
                                                                       class="form-control"
                                                                       size="30000000"
                                                                       style="padding-left: 9rem; padding-top: 5px; font-size: 1rem;"
                                                                       accept="image/jpeg,image/png"
                                                                       aria-label="Фотографии"/>
                                                                <label for="filePerson" class="" style="top: 0.5rem;"
                                                                       th:text="${#messages.msg('words.new_photo')}">Новая
                                                                    фотография</label>
                                                            </div>
                                                        </div>
                                                        <!--/*End-of-Grid column*/-->
                                                        <div class="col-md-12">
                                                            <!--/*City*/-->
                                                            <div class="md-form form-sm">
                                                                <input type="text" id="editProfile6" name="city"
                                                                       class="form-control"
                                                                       th:value="${person.getCity()}"/>
                                                                <label for="editProfile6" class=""
                                                                       th:text="${#messages.msg('words.city')}">City</label>
                                                            </div>
                                                        </div>
                                                        <!--/*Grid column*/-->
                                                        <div class="col-md-6">
                                                            <!--/*Facebook*/-->
                                                            <div class="md-form form-sm mt-2">
                                                                <input type="text" id="editProfile8" name="vk"
                                                                       th:value="${person.getVk()}"
                                                                       class="form-control"/>
                                                                <label for="editProfile8" class="">VK</label>
                                                            </div>
                                                        </div>
                                                        <!--/*End-of-Grid column*/-->
                                                        <!--/*Grid column*/-->
                                                        <div class="col-md-6">
                                                            <!--/*LinkedIn*/-->
                                                            <div class="md-form form-sm mt-2">
                                                                <input type="text" id="editProfile10" name="telegram"
                                                                       th:value="${person.getTelegram()}"
                                                                       class="form-control"/>
                                                                <label for="editProfile10" class="">Telegram</label>
                                                            </div>
                                                        </div>
                                                        <!--/*End-of-Grid column*/-->
                                                    </div>
                                                    <div class="modal-footer justify-content-center">
                                                        <button type="reset"
                                                                class="btn btn-outline-primary waves-effect waves-light"
                                                                data-dismiss="modal">Закрыть
                                                        </button>
                                                        <button type="submit"
                                                                class="btn btn-primary waves-effect waves-light">
                                                            Сохранить <i class="fa fa-check ml-1"></i></button>
                                                    </div>
                                                    <!--/*End-of-Grid row*/-->
                                                </form>
                                            </div>
                                        </div>
                                        <!--/*End-of-Panel 7*/-->
                                        <!--/*Panel 8*/-->
                                        <div class="tab-pane fade" id="panel88" role="tabpanel" aria-expanded="false">
                                            <!--/*Body*/-->
                                            <div class="modal-body" style="padding-top: 0">
                                                <form th:object="${person}" action="/users/edit_private" method="post"
                                                      autocomplete="off">
                                                    <div class="col-md-12">
                                                        <h4 style="font-weight: bold">Изменение email адреса</h4>
                                                    </div>
                                                    <div class="clearfix"></div>
                                                    <br/>
                                                    <div class="col-md-12">
                                                        <div class="md-form form-sm">
                                                            <input type="email" id="form24" name="email"
                                                                   class="form-control"
                                                                   th:value="${person.getEmail()}"/>
                                                            <label for="form24">Email</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-12">
                                                        <h4 style="font-weight: bold">Изменение пароля</h4>
                                                    </div>
                                                    <div class="clearfix"></div>
                                                    <br/>
                                                    <div class="col-xs-6">
                                                        <div class="md-form form-sm">
                                                            <input type="password" name="pass" id="form26"
                                                                   class="form-control" minlength="6" autocomplete="off"/>
                                                            <label for="form26">Новый пароль</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-xs-6">
                                                        <div class="md-form form-sm">
                                                            <input type="password" name="pass_confirm" id="form27"
                                                                   class="form-control" autocomplete="off"/>
                                                            <label for="form27">Подтвердите пароль</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-12">
                                                        <h4 style="font-weight: bold">Для применения изменений введите текущий пароль</h4>
                                                    </div>
                                                    <div class="clearfix"></div>
                                                    <br/>
                                                    <div class="col-md-12">
                                                        <div class="md-form form-sm">
                                                            <input type="password" name="last_pass" id="form25"
                                                                   class="form-control" required="" autocomplete="off"/>
                                                            <label for="form25">Текущий пароль</label>
                                                        </div>
                                                    </div>
                                                    <div class="modal-footer justify-content-center">
                                                        <button type="reset"
                                                                class="btn btn-outline-primary waves-effect waves-light"
                                                                data-dismiss="modal">Закрыть
                                                        </button>
                                                        <button type="submit"
                                                                class="btn btn-primary waves-effect waves-light">
                                                            Сохранить <i class="fa fa-check ml-1"></i>
                                                        </button>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                        <!--/*End-of-Panel 8*/-->
                                    </div>
                                </div>
                            </div>
                            <!--/*End-of-Content*/-->
                        </div>
                    </div>
                    <!--/*End-of-Modal: modalEditProfile*/-->
                    <!--/*Modal: modalFeedback*/-->
                    <div class="modal fade" id="modalFeedback" tabindex="-1" role="dialog"
                         aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
                        <div class="modal-dialog cascading-modal modal-lg" role="document">
                            <!--/*Content*/-->
                            <div class="modal-content">
                                <!--/*Header*/-->
                                <div class="modal-header light-blue darken-3 white-text">
                                    <h4 class=""><i class="fa fa-newspaper-o"></i> Новое сообщение</h4>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                            aria-hidden="true">×</span></button>
                                </div>
                                <!--/*Body*/-->
                                <div class="modal-body mb-0">
                                    <form action="/users/addsupport" method="post">
                                        <!--/*Subject*/-->
                                        <div class="md-form form-sm">
                                            <input type="text" id="modalFeedback1" name="name" class="form-control"/>
                                            <label for="modalFeedback1" class="">Тема сообщения</label>
                                        </div>
                                        <!--/*Topic*/-->
                                        <div class="md-form form-sm">
                                            <fieldset class="">
                                                <h4 style="font-weight: bold">Выберите категорию:</h4>
                                                <input type="radio" id="star25" name="category" value="1"/>
                                                <label for="star25">Идея</label>
                                                <input type="radio" id="star24" name="category" value="2"/>
                                                <label for="star24">Отзыв</label>
                                                <input type="radio" id="star23" name="category" value="3"/>
                                                <label for="star23">Ошибка</label>
                                            </fieldset>
                                        </div>
                                        <!--/*Message*/-->
                                        <div class="md-form">
        <textarea type="text" id="modalFeedback2" class="md-textarea"
                  style="height: 300px;" name="data"></textarea>
                                            <label for="modalFeedback2">Подробное описание</label>
                                        </div>
                                        <div class="modal-footer justify-content-center">
                                            <button type="reset"
                                                    class="btn btn-outline-primary waves-effect waves-light"
                                                    data-dismiss="modal">Закрыть
                                            </button>
                                            <button type="submit" class="btn btn-primary waves-effect waves-light">
                                                Отправить <i
                                                    class="fa fa-paper-plane ml-1"></i></button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            <!--/*End-of-Content*/-->
                        </div>
                    </div>
                    <!--/*End-of-Modal: modalFeedback*/-->
                    <!--/*Modal: modalAchievment*/-->
                    <div class="modal fade" id="modalAchievment" tabindex="-1" role="dialog"
                         aria-labelledby="myModalLabel" aria-hidden="true">
                        <div class="modal-dialog cascading-modal" role="document">
                            <!--/*Content*/-->
                            <div class="modal-content">
                                <!--/*Header*/-->
                                <div class="modal-header light-blue darken-3 white-text">
                                    <h4 class=""><i class="fa fa-newspaper-o"></i> Bootstrap Master</h4>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                            aria-hidden="true">×</span></button>
                                </div>
                                <!--/*Body*/-->
                                <div class="modal-body mb-0">
                                    <p>текст</p>
                                </div>
                                <!--/*Footer*/-->
                                <div class="modal-footer justify-content-center">
                                    <button type="button" class="btn btn-outline-primary waves-effect waves-light"
                                            data-dismiss="modal">Закрыть
                                    </button>
                                    <button type="button" class="btn btn-primary waves-effect waves-light">Go to <i
                                            class="fa fa-arrow-right ml-1"></i></button>
                                </div>
                            </div>
                            <!--/*End-of-Content*/-->
                        </div>
                    </div>
                    <!--/*End-of-Modal: modalAchievment*/-->
                    <!--/*Modal: modalContactUser */-->
                    <div class="modal fade" id="modalContactUser" tabindex="-1" role="dialog"
                         aria-labelledby="myModalLabel" aria-hidden="true">
                        <div class="modal-dialog cascading-modal modal-lg" role="document">
                            <!--/*Content*/-->
                            <div class="modal-content">
                                <!--/*Header*/-->
                                <div class="modal-header light-blue darken-3 white-text">
                                    <h4 class=""><i class="fa fa-envelope-o"></i> Новое сообщение</h4>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                            aria-hidden="true">×</span></button>
                                </div>
                                <!--/*Body*/-->
                                <div class="modal-body mb-0">
                                    <!--/*Basic textarea*/-->
                                    <div class="md-form">
<textarea type="text" id="modalContactUser1" class="md-textarea"
          style="height: 400px;"></textarea>
                                        <label for="modalContactUser1">Your message</label>
                                    </div>
                                </div>
                                <!--/*Footer*/-->
                                <div class="modal-footer justify-content-center">
                                    <button type="button" class="btn btn-outline-primary waves-effect waves-light"
                                            data-dismiss="modal">Отмена
                                    </button>
                                    <button type="button" class="btn btn-primary waves-effect waves-light">Отправить <i
                                            class="fa fa-paper-plane ml-1"></i></button>
                                </div>
                            </div>
                            <!--/*End-of-Content*/-->
                        </div>
                    </div>
                    <!--/*End-of-Modal: modalContactUser*/-->
                    <!--/*Modal: modalUpToGuide*/-->
                    <div class="modal fade" id="modalUpToGuide" tabindex="-1" role="dialog"
                         aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
                        <div class="modal-dialog cascading-modal modal-lg" role="document">
                            <!--/*Content*/-->
                            <div class="modal-content">
                                <!--/*Header*/-->
                                <div class="modal-header light-blue darken-3 white-text">
                                    <h4 class=""><i class="fa fa-newspaper-o"></i> Дополнительные поля</h4>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                            aria-hidden="true">×</span></button>
                                </div>
                                <form action="/users/up_to_guide" enctype="multipart/form-data" method="post">
                                    <!--/*Body*/-->
                                    <div class="modal-body mb-0">
                                        <!--/*Grid row*/-->
                                        <div class="row">
                                            <!--/*Grid column*/-->
                                            <div class="col-md-6">
                                                <!--/*First Name*/-->
                                                <div class="md-form form-sm">
                                                    <input type="text" id="upToGuide1" required=""
                                                           class="form-control" name="series_and_number"/>
                                                    <label for="editProfile1" class="">Серия и номер паспорта</label>
                                                </div>
                                            </div>
                                            <!--/*End-of-Grid column*/-->
                                            <!--/*Grid column*/-->
                                            <div class="col-md-6">
                                                <!--/*Last Name*/-->
                                                <div class="md-form form-sm">
                                                    <input type="text" id="upToGuide2" required=""
                                                           class="form-control" name="date_and_place"/>
                                                    <label for="editProfile2" class="">Кем и когда выдан паспорт</label>
                                                </div>
                                            </div>
                                            <!--/*End-of-Grid column*/-->
                                            <!--/*Grid column*/-->
                                            <div class="col-md-12">
                                                <div class="md-form form-sm">
                                                    <input name="file" type="file" id="upToGuide3" required=""
                                                           class="form-control"
                                                           size="30000000"
                                                           style="padding-left: 10rem; padding-top: 5px; font-size: 1rem;"
                                                           accept="image/jpeg,image/png"
                                                           aria-label="Фотография паспорта"/>
                                                    <label for="upToGuide3" class="" style="top: 0.5rem;">Фотография
                                                        паспорта</label>
                                                </div>
                                            </div>
                                            <!--/*End-of-Grid column*/-->
                                            <!--/*Grid column*/-->
                                            <div class="col-md-12" th:if="${person.getAbout()==''}">
                                                <!--/*Company website*/-->
                                                <div class="md-form form-sm">
<textarea type="text" id="upToGuide4" name="about_me"
          class="md-textarea" required=""
          th:text="${person.getAbout()}"></textarea>
                                                    <label for="upToGuide4"
                                                           th:text="${#messages.msg('words.about_me')}">О себе</label>
                                                </div>
                                            </div>
                                            <!--/*End-of-Grid column*/-->

                                            <!--/*Grid column*/-->
                                            <div class="col-md-12" th:if="${person.getPhoneNumber()==''}">
                                                <!--/*Company website*/-->
                                                <div class="md-form form-sm">
                                                        <input name="phone_number" type="text" class="form-control bfh-phone" required=""
                                                               minlength="17" data-format="+7 (ddd) ddd-dddd" id="phone_number"/>
                                                        <label for="phone_number"
                                                               th:text="${#messages.msg('words.phone')}">Номер телефона</label>
                                                        <!--/*@thymesVar id="error_phone" type="java.lang.Boolean"*/-->
                                                        <!--<label for="phone_number" th:if="${error_phone}"
                                                               th:text="${#messages.msg('error.user.phone_number.free')}" th:class="'error'">Name
                                                            Error</label>
                                                        <label for="phone_number" th:if="${#fields.hasErrors('phoneNumber')}"
                                                               th:text="${#messages.msg('error.user.phone_number.invalid')}" th:class="'error'">Name
                                                            Error</label>--><!--TODO-->
                                                </div>
                                            </div>
                                            <!--/*End-of-Grid column*/-->

                                        </div>
                                        <!--/*End-of-Grid row*/-->
                                    </div>
                                    <!--/*Footer*/-->
                                    <div class="modal-footer justify-content-center">
                                        <button type="reset" class="btn btn-outline-primary waves-effect waves-light"
                                                data-dismiss="modal">Отменить
                                        </button>
                                        <button type="submit" class="btn btn-primary waves-effect waves-light">Отправить
                                            <i class="fa fa-check ml-1"></i></button>
                                    </div>
                                </form>
                            </div>
                            <!--/*End-of-Content*/-->
                        </div>
                    </div>
                    <!--/*End-of-Modal: modalUpToGuide*/-->

                    <div class="modal fade" id="modalDispute" tabindex="-1" role="dialog"
                         aria-labelledby="myModalLabel" aria-hidden="true">
                        <div class="modal-dialog cascading-modal modal-lg">
                            <div class="modal-content">

                                <div class="modal-header light-blue darken-3 white-text">
                                    <h4 class=""><i class="fa fa-newspaper-o"></i> Открыть спор?</h4>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                            aria-hidden="true">×</span></button>
                                </div>

                                <div class="modal-body">
                                    <form action="/orders/add_disute" method="post">
                                        <!--/*Subject*/-->
                                        <input id="order_id1" name="order_id"
                                               style="visibility: hidden; width: 0; height: 0; display: none;"/>
                                        <!--/*Topic*/-->
                                        <div class="md-form form-sm">
                                            <fieldset class="">
                                                <h4 style="font-weight: bold">Выберите категорию:</h4>
                                                <input type="radio" id="star28" name="category" value="1"/>
                                                <label for="star28">Идея</label>
                                                <input type="radio" id="star27" name="category" value="2"/>
                                                <label for="star27">Отзыв</label>
                                                <input type="radio" id="star26" name="category" value="3"/>
                                                <label for="star26">Ошибка</label>
                                            </fieldset>
                                        </div>
                                        <!--/*Message*/-->
                                        <div class="md-form">
        <textarea type="text" id="modalDispute2" class="md-textarea"
                  style="height: 220px;" name="data"></textarea>
                                            <label for="modalDispute2">Подробное описание</label>
                                        </div>
                                        <div class="modal-footer justify-content-center">
                                            <button type="reset"
                                                    class="btn btn-outline-primary waves-effect waves-light"
                                                    data-dismiss="modal">Закрыть
                                            </button>
                                            <button type="submit" class="btn btn-primary waves-effect waves-light">
                                                Открыть спор<i
                                                    class="fa fa-gavel ml-1"></i></button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div th:replace="fragments/modals :: review"></div>

                </section>
                <!--/*End-of-Section: Modals*/-->
            </div>
        </main>
        <!--/*End-of-Main layout*/-->
        <div class="hiddendiv common"></div>
    </div>
</div>
<div th:replace="fragments/footer :: footer"></div>
<script type="text/javascript" src="../../resources/js/compiled.min.js"></script>
<script type="text/javascript" src="../../resources/libs/popper/popper.js"></script>
<!--/*Custom scripts*/-->
<script th:inline="javascript">
    /*<![CDATA[*/
    function onImgError() {
        document.getElementById("img-person").style.display = "none";
        document.getElementById("card-person").style.marginTop = '0';
    }

    function showHide0(page) {
//Если элемент с id-шником element_id существует
        var id = page * 2 - 2;
        var idUp = id + 1;
        var i;
        var pages;
        var ordersSize = [[${orders.size()}]];
        if (ordersSize % 2 === 0) pages = ordersSize / 2;
        else pages = ordersSize / 2 + 1;
        for (i = 0; i < ordersSize; i++) {
            var j = i + 1;
            document.getElementById('id-0' + i).style.display = "none";
            if (i < pages && document.getElementById('page_events-0' + j))
                document.getElementById('page_events-0' + j).className = "page-item";
            if (j === page && document.getElementById('page_events-0' + j))
                document.getElementById('page_events-0' + j).className = "page-item active";
        }

        if (document.getElementById('id-0' + id))
            document.getElementById('id-0' + id).style.display = "";
        if (document.getElementById('id-0' + idUp))
            document.getElementById('id-0' + idUp).style.display = "";

        switch (page) {
            case 1:
                document.getElementById('to-home-exc-0').className = "page-item disabled clearfix d-none d-sm-block";
                document.getElementById('to-end-exc-0').className = "page-item clearfix d-none d-sm-block";
                break;
            case Math.floor(pages):
                document.getElementById('to-home-exc-0').className = "page-item clearfix d-none d-sm-block";
                document.getElementById('to-end-exc-0').className = "page-item disabled clearfix d-none d-sm-block";
                break;
            default:
                document.getElementById('to-home-exc-0').className = "page-item clearfix d-none d-sm-block";
                document.getElementById('to-end-exc-0').className = "page-item clearfix d-none d-sm-block";
        }
    }

    function showHide(page) {
//Если элемент с id-шником element_id существует
        var id = page * 2 - 2;
        var idUp = id + 1;
        var i;
        var eventsSize = [[${events.size()}]];

        var pages;
        if (eventsSize % 2 === 0) pages = eventsSize / 2;
        else pages = eventsSize / 2 + 1;

        for (i = 0; i < eventsSize; i++) {
            var j = i + 1;
            document.getElementById('id' + i).style.display = "none";
            if (i < pages && document.getElementById('page_events' + j))
                document.getElementById('page_events' + j).className = "page-item";
            if (j === page && document.getElementById('page_events' + j))
                document.getElementById('page_events' + j).className = "page-item active";
        }

        if (document.getElementById('id' + id))
            document.getElementById('id' + id).style.display = "";
        if (document.getElementById('id' + idUp))
            document.getElementById('id' + idUp).style.display = "";

        switch (page) {
            case 1:
                document.getElementById('to-home-exc').className = "page-item disabled clearfix d-none d-sm-block";
                document.getElementById('to-end-exc').className = "page-item clearfix d-none d-sm-block";
                break;
            case  Math.floor(pages):
                document.getElementById('to-home-exc').className = "page-item clearfix d-none d-sm-block";
                document.getElementById('to-end-exc').className = "page-item disabled clearfix d-none d-sm-block";
                break;
            default:
                document.getElementById('to-home-exc').className = "page-item clearfix d-none d-sm-block";
                document.getElementById('to-end-exc').className = "page-item clearfix d-none d-sm-block";
        }
    }

    /*]]>*/
</script>
<script>

    $('[data-toggle=confirmation]').confirmation({
        rootSelector: '[data-toggle=confirmation]'
        // other options
    });

    // SideNav Initialization
    $(".button-collapse").sideNav();
    var container = document.getElementById('slide-out');
    Ps.initialize(container, {
        wheelSpeed: 2,
        wheelPropagation: true,
        minScrollbarLength: 20
    });
</script>
<div class="drag-target"
     style="left: 0; touch-action: pan-y; user-select: none; -webkit-user-drag: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></div>
</body>
</html>